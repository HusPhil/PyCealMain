<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename ='/css/decoder.css')}}"> 
        <link href='https://fonts.googleapis.com/css?family=League Spartan' rel='stylesheet'>
    
        <title> {{ title }} </title>
        <!-- BOOTSTRAP -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" 
                    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    </head>


<body id=steg>
        <!-- BOOTSTRAP -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
        </script>

    <form action="" class="reg" method="post" enctype="multipart/form-data" novalidate>
                {{ form.hidden_tag() }}

        <div class="content-box">
            
            <div class="uploadF">
                    {{form.img_file.label(class = "btn-warning", style="text-align: center; cursor: pointer;")}}
                    {{form.img_file(style="display: none;")}}
                    <p id="filename">No file Chosen</p>
                    {% for error in form.img_file.errors %}
                        <span style="color:red">[{{ error }}]</span>
                    {% endfor %}
            </div>


            <div class="decode">
                {{form.decode_img(class = "btn-warning")}} 
            </div>
            
        </div>


        <div class="display">
            
            <div class="d-container">
            <div class="img-selected">
                <img src="data:image/jpeg;base64,{{ data.selected_img }}"
                onerror="this.onerror=null; this.src='../static/images/no_image.png';" 
                width="200px" height="200px">
            </div>
            <div>
            <p>{{data.decoded_messsage}}</p>
            <p style="color: green;">{{data.validation_result}}</p>
            <p style="color: red;">{{data.error_result}}</p>
            </div>
            </div>
        </div> 
        <br>


    </form>

    <script>
    document.querySelector('input[type="file"]').addEventListener('change', function () {
        const filename = this.value.split('\\').pop();
        document.querySelector('#filename').textContent = filename;
    });
    </script>

</body>
</html>